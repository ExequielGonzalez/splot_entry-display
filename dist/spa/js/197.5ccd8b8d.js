"use strict";(self["webpackChunksplot_entry_display"]=self["webpackChunksplot_entry_display"]||[]).push([[197],{8197:(t,e,a)=>{a.r(e),a.d(e,{default:()=>b});var s=a(3673),n=a(2323);const o=t=>((0,s.dD)("data-v-e25ff0da"),t=t(),(0,s.Cn)(),t),i={key:0,class:"information"},r=o((()=>(0,s._)("h2",{class:"information__title"},"Lugares disponibles",-1))),c={class:"information__number"},l={key:1,class:"information"},u=o((()=>(0,s._)("h1",{class:"information__error"},"No hay lugares disponibles",-1))),d=[u];function f(t,e,a,o,u,f){return(0,s.wg)(),(0,s.iD)(s.HY,null,[t.noPlace?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("section",i,[r,(0,s._)("h1",c,(0,n.zw)(t.freePlaces),1)])),t.noPlace?((0,s.wg)(),(0,s.iD)("section",l,d)):(0,s.kq)("",!0)],64)}var h=a(1959),p=a(5615);function w(t){return(0,p.ZP)(`http://${window.location.hostname}:${t}`)}function m(t,e){t.on("active_plates_update",(()=>{e()}))}const _=`http://${window.location.hostname}:5000`;async function k(t,e="GET"){let a={},s=await fetch(t,{method:`${e}`});return 200===s.status&&(a=await s.json()),{status:s.status,data:a}}async function P(){return await k(`${_}/api/v1/reports/countPlaces`)}const y=(0,s.aZ)({name:"Home",setup(){return{noPlace:(0,h.iH)(!1)}},data(){return{wsNotification:!1,parkPlaces:{total:0,free:0,busy:0},motorbikePlaces:{total:0,free:0,busy:0}}},computed:{freePlaces(){var t;return null!==(t=this.parkPlaces.free)&&void 0!==t?t:0}},mounted(){const t=w(5e3);m(t,this.newMessage),this.newMessage()},methods:{async newMessage(){let t,e={};t=await P(),200===t.status&&(e=t.data),this.parkPlaces=e.carsAndVans,this.motorbikePlaces=e.motorbikes,console.log(t),0===this.parkPlaces.free?this.noPlace=!0:this.noPlace=!1}}});y.render=f,y.__scopeId="data-v-e25ff0da";const b=y}}]);